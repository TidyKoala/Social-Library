{% extends 'SocialLibraryReadableMediaNovelBundle:Novel:index.html.twig' %}

{% block list %}
<table class="records_list table table-striped table-bordered table-hover">
    <thead>
    	<tr>
    		<th>
                {% trans %}novel_header_volume{% endtrans %}
    		</th>
    		<th>
    		    {% trans %}novel_header_name{% endtrans %}
		    </th>
    		<th>
    		    {{ entities.sortable('novel_header_serie', 's.nameSlug', {'translationDomain' : 'messages'})|raw }}
		    </th>
    		<th>
    		    {{ entities.sortable('novel_header_authors', 'c.lastname', {'translationDomain' : 'messages' })|raw }}
		    </th>
            <th>
    		    {% trans %}novel_header_actions{% endtrans %}
            </th>
    	</tr>
    </thead>
    <tbody>
    {% for entity in entities %}
     	<tr>
     		<td>
     		    {{ entity.volume }}
 		    </td>
     		<td>
     		    <a href="{{ path('novel_show', {'id': entity.id, 'nameSlug': entity.nameSlug }) }}">{{ entity.name }}</a>
 		    </td>
     		<td>
 		        {{ entity.serie }}
	        </td>
     		<td>
     		    {{ entity.creators|join(', ') }}
 		    </td>
            <td>
                <ul>
                    <li>
                        <a href="{{ path('novel_show', { 'id': entity.id, 'nameSlug': entity.nameSlug }) }}"><i class="icon-eye"></i> {% trans %}novel_details{% endtrans %}</a>
                    </li>
                    {% if is_granted('ROLE_ADMIN') %}
                        {% if entity.isOwner(app.user) %}
                    <li>
                        <a href="{{ path('novel_edit', { 'id': entity.id, 'nameSlug': entity.nameSlug }) }}"><i class="icon-pencil"></i> {% trans %}novel_edit{% endtrans %}</a>
                    </li>
                    <li>
                        <a href="{{ path('novel_remove_owner', { 'id': entity.id, 'nameSlug': entity.nameSlug }) }}"><i class="icon-logout"></i> {% trans %}novel_delete{% endtrans %}</a>
                    </li>
                        {% else %}
                    <li>
                        <a href="{{ path('novel_add_owner', { 'id': entity.id, 'nameSlug': entity.nameSlug }) }}"><i class="icon-login"></i> {% trans %}novel_own{% endtrans %}</a>
                    </li>
                        {% endif %}
                    {% endif %}
                </ul>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{{ entities.render()|raw }}

{% endblock %}
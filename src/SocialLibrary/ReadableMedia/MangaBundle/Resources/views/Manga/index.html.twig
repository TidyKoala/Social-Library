<h1>Manga list</h1>

{% for flashMessage in app.session.flashbag.get('success') %}
    <div class="flash-success">
        {{ flashMessage }}
    </div>
{% endfor %}

<table class="records_list">
    <thead>
    	<tr>
    		<th>
    		    {{ entities.sortable('manga_header_volume', 'm.volume', {'translationDomain' : 'messages'})|raw }}
    		</th>
    		<th>
    		    {% trans %}manga_header_name{% endtrans %}
		    </th>
    		<th>
    		    {{ entities.sortable('manga_header_serie', 's.nameSlug', {'translationDomain' : 'messages'})|raw }}
		    </th>
    		<th>
    		    {{ entities.sortable('manga_header_authors', 'c.lastname', {'translationDomain' : 'messages' })|raw }}
		    </th>
            <th>
                Actions
            </th>
    	</tr>
    </thead>
    <tbody>
    {% for entity in entities %}
     	<tr>
     		<td>
     		    {{ entity.volume }}
 		    </td>
     		<td>
     		    <a href="{{ path('manga_show', {'id': entity.id, 'nameSlug': entity.nameSlug }) }}">{{ entity.name }}</a>
 		    </td>
     		<td>
 		        {{ entity.serie }}
	        </td>
     		<td>
     		    {{ entity.creators|join(', ') }}
 		    </td>
            <td>
                <ul>
                    <li>
                        <a href="{{ path('manga_show', { 'id': entity.id, 'nameSlug': entity.nameSlug }) }}">{% trans %}manga_details{% endtrans %}</a>
                    </li>
                    {% if is_granted('ROLE_ADMIN') %}
                    <li>
                        <a href="{{ path('manga_edit', { 'id': entity.id, 'nameSlug': entity.nameSlug }) }}">{% trans %}manga_edit{% endtrans %}</a>
                    </li>
                    <li>
                        <a href="{{ path('manga_add_owner', { 'id': entity.id, 'nameSlug': entity.nameSlug }) }}">{% trans %}manga_own{% endtrans %}</a>
                    </li>
                    {% endif %}
                </ul>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% if is_granted('ROLE_ADMIN') %}
<ul>
    <li>
        <a href="{{ path('manga_new') }}">
            {% trans %}manga_add{% endtrans %}
        </a>
    </li>
</ul>
{% endif %}
